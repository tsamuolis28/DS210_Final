# DS210_Final
Final Project for DS210 looking at Spotify data


General Project Description:
For my final project, I looked at data provided by the Spotify Million Playlist Dataset. This data consists of 1000 .json files with 1000 user-created Spotify playlists in each file. These playlists contain various pieces of information, including the length of playlists, song names, artists, and more. What I was interested in finding however, was the connections between artists. For my project, I defined the nodes of my graph as every unique artist in the dataset. An artist is connected to another artist in my data set if they appear in a playlist together. For example, if Drake and Rihanna appear in a playlist together, they are connected. For example, if Drake and Elton John don’t appear in a playlist together anywhere, but Rihanna and Elton John do, then Drake is a distance of two away from Elton John. The end goal of my project was to find the average distance between every artist and every other artist in my graph.

How the project works:
First, this data set is extremely large, and running the project on all of the files was not reasonable on my computer, as there are over 280,000 nodes, most of which have tens of thousands of connections. In my testing, reading the first 8 files in the data set finds nearly 32,000 artists, and takes about 10 minutes to run the entire program, so this is what N is set to by default, but can be changed in the code in the second line of my main() function. My code reads the N first files from the data set, and from those files creates a vector of vectors. The elements in the outer vector represent each playlist, and the elements in each playlist are every unique artist in that playlist. Thus, I have a vector of playlists where each playlist has a list of its artists. I then make a second, one-dimensional vector which finds just the total number of unique artists from the previous vector of vectors. Using that I make a hash map that represents every artist in the data set as a number. After this, I convert the original vector of vectors of artist names to a vector of vectors of artist numbers that correspond to their numbers in the hash set. After this I iterate over every unique artist, and for each artist I iterate through every playlist, and see if that artist exists in that playlist. If they do, a tuple is made with that artist and every artist in that playlist, and then placed into a vector. That vector ends up being my list of tuples. From this, I create a graph using an adjacency list. I run BFS on this graph to find which nodes belong to the largest component in this graph. After I find which nodes are in the largest component, I run BFS on just those nodes, and find the average distance between that node and every other node. This ends up being my final answer. 

Output of the code:
Because I have so many files to read and nodes to traverse, the code can have long lulls without any visible progress. To combat this, I added print statements throughout the execution of the code to show its progress. When reading many files, the code prints that it has read x/N files every 75 files that it reads. The next print statement says how many unique artists the code found. Once it makes the hashmap, it confirms that with a print statement. After every 1000 artists have their tuples found, it prints the name of that artist and the progress out of the total number of artists. A print statement confirms the graph is made, and when the largest component is found. Finally, when finding the average distance between nodes, every 1000 nodes the program finds the average of the program prints its progress, and where the current average is. The last line of code prints the final, total average distance between every artist and every other artist, along with how many artists were included. As a note, when reading fewer than 10 files, many of these print statements appear so fast that you can’t notice them. However, when reading larger numbers of files, these print statements are useful because they show where the program is in the process, and provide a visual stimulus that I believe makes the program more interesting to run, instead of just waiting for some amount of time for a final answer. 

Running the Code:
To run the program, you need to download the data. You can do this at the following link: https://www.aicrowd.com/challenges/spotify-million-playlist-dataset-challenge/dataset_files. To access the data, you will need to log in either using google or github. After downloading the file, you want to add the folder containing “data” to the local files of the project, as the path in my code just looks for “data.” Upon submission, the code will be set to read the first 8 files. If you want to change this, just change the second line of my main() function to any value. After you have the data “cargo run  - - release” will run the code. 

Analysis of output:
After running my program on various numbers of files and artists, I have found that the average distance between artists generally hovers between 2.4 and 2.6. I find this number to be surprisingly small, although I can understand why the limit seems to be here. Intuitively, I would have thought that this number would be higher because of how many obscure artists there are on spotify. In general, there are way more obscure, relatively unpopular artists than popular ones, so they wouldn’t appear in playlists with that many artists. However, I believe this is counteracted by the fact that by definition, popular artists will be in many playlists, so popular artists are more likely to be in playlists with unpopular artists than other unpopular artists are. This is my guess as to why this number seems relatively low, compared to many other graphs. On top of this, adding more playlists into the data I look at adds more new artists, but also creates new edges for existing artists without really changing anything. In theory, if you kept the number of unique artists the same and just added more and more playlists, the average distance would approach 1, as there would be more and more opportunities to find connections between two artists. However adding playlists generally does add artists, so that does not happen. 

